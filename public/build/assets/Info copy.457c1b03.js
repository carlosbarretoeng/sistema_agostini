import{u as f,j as U,k as V,h as Y,o as a,c as d,l as x,F as b,e as i,d as o,a as n,b as l,i as G,m as H,t as g,q as p}from"./app.c0934f99.js";import{_ as J,A as y}from"./AppLayout.b5c1bae9.js";import{_ as w}from"./InputText.230fb108.js";import{_ as q}from"./InputSelect.4b9144ff.js";import{_ as K}from"./ChartLineTimeSerie.64e0b071.js";import{T as D}from"./time.util.04a5000e.js";import"./pt-br.a403408c.js";const W=["href"],X=o("span",{class:"hidden sm:inline-block"},"Voltar",-1),Z=o("span",{class:"hidden sm:inline-block"},"Salvar",-1),I=o("span",{class:"hidden sm:inline-block"},"Atualizar",-1),R=["href"],oo=o("span",{class:"hidden sm:inline-block"},"Editar",-1),eo={key:1,href:"#deleteModal",class:"btn btn-error gap-2"},so=o("span",{class:"hidden sm:inline-block"},"Excluir",-1),to={class:"modal",id:"deleteModal"},ao={class:"modal-box"},io=o("h3",{class:"font-bold text-lg"},"Excluir Empresa",-1),no=o("p",{class:"py-4"},"Tem certeza de que quer excluir essa empresa? Essa opera\xE7\xE3o n\xE3o poder\xE1 ser defeita.",-1),lo={class:"modal-action"},ro=o("a",{href:"#",class:"btn"},"N\xE3o",-1),co={class:"grid sm:grid-cols-4 gap-2"},uo={key:0,class:"divider"},po={key:1,class:"grid sm:grid-cols-4 gap-2 my-2"},mo={href:"#addProductModal",class:"btn w-full sm:col-span-4 gap-2"},_o=o("span",{class:"hidden sm:inline-block"},"Adicionar Etapa de Produto",-1),ho={class:"modal",id:"addProductModal"},bo={class:"modal-box"},fo=o("h3",{class:"font-bold text-lg"},"Adicionar Etapa de Produto",-1),go={class:"modal-action"},vo=o("a",{href:"#",class:"btn"},"Cancelar",-1),yo={class:"grid sm:grid-cols-3 gap-2"},ko={class:"flex items-center space-x-2 h-12 p-2 bg-base-300"},Vo={class:"avatar placeholder"},xo={class:"bg-neutral-focus text-neutral-content rounded-full w-6"},wo={class:"font-bold"},Co={class:"flex items-center space-x-2 px-2"},Po={class:"w-full"},To={class:"grid grid-cols-2 font-light border-b-2"},Ao=o("div",{class:"font-semibold"},"Esta\xE7\xE3o:",-1),$o={class:"text-right"},Eo={class:"grid grid-cols-2 font-light"},No=o("div",{class:"font-semibold"},"Tempo M\xE9dio:",-1),zo={class:"text-right"},Uo={key:0,class:"bg-base-300/25 grid grid-cols-3 gap-2"},qo=["onClick","disabled"],Do=["onClick"],Mo=["onClick","disabled"],So={key:2},Go={__name:"Info copy",props:{context:String,id:Number,company_id:Number|null,name:String,productAverageProductionTime:Number|null,productRecipe:Array,companies:Array,machineries:Array,parts:Array,times_per_products:Array},setup(u){var P,T,A,$;const r=u,k=D.secondsToTimestamp(r.productAverageProductionTime),C=r.context==="create",m=r.context==="show",v=r.context==="edit",_=f({id:(P=r.id)!=null?P:null,company_id:(T=r.company_id)!=null?T:null,name:(A=r.name)!=null?A:null}),h=f({product_id:($=r.id)!=null?$:null,part_id:null,machinery_id:null,order:r.productRecipe.length+1,quantity:null}),M=()=>{p.Inertia.delete(route("product.destroy",r.id))},S=()=>{p.Inertia.post(route("product.store"),_)},B=()=>{p.Inertia.put(route("product.update",r.id),_)},F=s=>{p.Inertia.delete(route("product_recipe.destroy",s.id),f({product_id:s.productId}))},O=s=>{p.Inertia.put(route("product_recipe.update",s.id),f({id:s.id,product_id:s.productId,order:s.order+1}))},j=s=>{p.Inertia.put(route("product_recipe.update",s.id),f({id:s.id,product_id:s.productId,order:s.order-1}))},L=()=>{h.order=r.productRecipe.length+1,p.Inertia.post(route("product_recipe.store"),h)};return(s,t)=>{const c=Y("font-awesome-icon");return a(),U(J,null,{header:V(()=>[C?(a(),d(b,{key:0},[x(" Novo Produto ")],64)):i("",!0),m||v?(a(),d(b,{key:1},[x(" Produto ")],64)):i("",!0)]),actions:V(()=>[o("a",{href:s.route("product.index"),class:"btn btn-outline mr-2 gap-2"},[n(c,{icon:"fa-solid fa-arrow-left",size:"lg"}),X],8,W),C?(a(),d(b,{key:0},[l(y).canView(s.$page.props.user,{permission:"product.create"})?(a(),d("a",{key:0,onClick:t[0]||(t[0]=e=>S()),class:"btn btn-success gap-2"},[n(c,{icon:"fa-solid fa-save",size:"lg"}),Z])):i("",!0)],64)):i("",!0),v?(a(),d(b,{key:1},[l(y).canView(s.$page.props.user,{permission:"product.update"})?(a(),d("a",{key:0,onClick:t[1]||(t[1]=e=>B()),class:"btn btn-success gap-2"},[n(c,{icon:"fa-solid fa-arrows-rotate",size:"lg"}),I])):i("",!0)],64)):i("",!0),m?(a(),d(b,{key:2},[l(y).canView(s.$page.props.user,{permission:"product.update"})?(a(),d("a",{key:0,href:s.route("product.edit",u.id),class:"btn btn-info mr-2 gap-2"},[n(c,{icon:"fa-solid fa-edit",size:"lg"}),oo],8,R)):i("",!0),l(y).canView(s.$page.props.user,{permission:"product.delete"})?(a(),d("a",eo,[n(c,{icon:"fa-solid fa-trash",size:"lg"}),so])):i("",!0),o("div",to,[o("div",ao,[io,no,o("div",lo,[o("a",{onClick:t[2]||(t[2]=e=>M()),class:"btn"},"Sim"),ro])])])],64)):i("",!0)]),default:V(()=>[o("div",co,[n(q,{label:"Empresa",options:u.companies,modelValue:l(_).company_id,"onUpdate:modelValue":t[3]||(t[3]=e=>l(_).company_id=e),disabled:m},null,8,["options","modelValue"]),n(w,{label:"Nome",modelValue:l(_).name,"onUpdate:modelValue":t[4]||(t[4]=e=>l(_).name=e),disabled:m},null,8,["modelValue"]),m?(a(),U(w,{key:0,label:"Tempo M\xE9dio de Produ\xE7\xE3o",modelValue:l(k),"onUpdate:modelValue":t[5]||(t[5]=e=>G(k)?k.value=e:null),disabled:""},null,8,["modelValue"])):i("",!0)]),u.productRecipe.length?(a(),d("div",uo,"Etapa de Produto")):i("",!0),v?(a(),d("div",po,[o("a",mo,[n(c,{icon:"fa-solid fa-add",size:"lg"}),_o]),o("div",ho,[o("div",bo,[fo,o("div",null,[n(q,{label:"Etapa",options:u.parts,modelValue:l(h).part_id,"onUpdate:modelValue":t[6]||(t[6]=e=>l(h).part_id=e)},null,8,["options","modelValue"]),n(w,{label:"Quantidade",mask:"#######",modelValue:l(h).quantity,"onUpdate:modelValue":t[7]||(t[7]=e=>l(h).quantity=e)},null,8,["modelValue"]),x(" d ")]),o("div",go,[vo,o("a",{class:"btn",href:"#",onClick:t[8]||(t[8]=e=>L())},"Adicionar")])])])])):i("",!0),o("div",yo,[(a(!0),d(b,null,H(u.productRecipe,(e,Q)=>{var E,N;return a(),d("div",{key:Q,class:"card card-compact bg-base-100 shadow-sm"},[o("div",ko,[o("div",Vo,[o("div",xo,[o("span",null,g(e.order),1)])]),o("div",null,[o("div",wo,g(e.quantity)+"x "+g(e.partName),1)])]),o("div",Co,[o("div",Po,[o("div",To,[Ao,o("div",$o,g((E=e.machineryName)!=null?E:"---"),1)]),o("div",Eo,[No,o("div",zo,g((N=l(D).secondsToTimestamp(e.partAverageProductionTime))!=null?N:"---"),1)])])]),v?(a(),d("div",Uo,[o("button",{class:"btn btn-ghost btn-sm w-full gap-2",onClick:z=>j(e),disabled:e.order<=1},[n(c,{icon:"fa-solid fa-down-long"})],8,qo),o("button",{class:"btn btn-ghost btn-sm w-full gap-2",onClick:z=>F(e)},[n(c,{icon:"fa-solid fa-trash"})],8,Do),o("button",{class:"btn btn-ghost btn-sm w-full gap-2",onClick:z=>O(e),disabled:e.order===u.productRecipe.length},[n(c,{icon:"fa-solid fa-up-long"})],8,Mo)])):i("",!0)])}),128))]),m?(a(),d("div",So,[n(K,{label:"Tempo m\xE9dio YTD",chartData:u.times_per_products},null,8,["chartData"])])):i("",!0)]),_:1})}}};export{Go as default};
