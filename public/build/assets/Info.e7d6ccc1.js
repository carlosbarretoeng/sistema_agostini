import{u as x,j as Q,k as C,h as L,o as s,c as o,l as Y,F as p,e as r,d as t,a as n,b as a,m as V,t as i,q as v}from"./app.c0934f99.js";import{_ as G,A as k}from"./AppLayout.b5c1bae9.js";import{_ as $}from"./InputText.230fb108.js";import{_ as D}from"./InputSelect.4b9144ff.js";import{T as w}from"./time.util.04a5000e.js";import"./pt-br.a403408c.js";const H=["href"],J=t("span",{class:"hidden sm:inline-block"},"Voltar",-1),K=t("span",{class:"hidden sm:inline-block"},"Salvar",-1),W=t("span",{class:"hidden sm:inline-block"},"Atualizar",-1),X=["href"],Z=t("span",{class:"hidden sm:inline-block"},"Imprimir",-1),tt=["href"],et=t("span",{class:"hidden sm:inline-block"},"Editar",-1),st={key:2,href:"#deleteModal",class:"btn btn-error gap-2"},ot=t("span",{class:"hidden sm:inline-block"},"Excluir",-1),dt={class:"modal",id:"deleteModal"},at={class:"modal-box"},nt=t("h3",{class:"font-bold text-lg"},"Excluir Empresa",-1),it=t("p",{class:"py-4"},"Tem certeza de que quer excluir essa empresa? Essa opera\xE7\xE3o n\xE3o poder\xE1 ser defeita.",-1),rt={class:"modal-action"},lt=t("a",{href:"#",class:"btn"},"N\xE3o",-1),ct={class:"grid sm:grid-cols-4 gap-2"},ut=t("div",{class:"divider"},"Produtos",-1),mt={class:""},_t={class:"table table-compact w-full"},pt={key:0,class:"w-1 text-center bg-base-300"},bt=t("th",{class:"bg-base-300"},"Produto",-1),ht=t("th",{class:"w-1/6 text-center bg-base-300"},"Quantidade",-1),ft={key:0},gt={colspan:"3"},vt={href:"#addProductModal",class:"btn w-full gap-2"},yt=t("span",{class:"hidden sm:inline-block"},"Adicionar Produto",-1),kt={class:"modal",id:"addProductModal"},xt={class:"modal-box"},Vt=t("h3",{class:"font-bold text-lg"},"Adicionar Produto",-1),wt={class:"modal-action"},Pt=t("a",{href:"#",class:"btn"},"Cancelar",-1),Ct={key:0},Yt=["onClick"],$t={class:"text-center"},Dt={key:0,class:"form-control"},qt={class:"input-group w-full justify-center"},Mt=["onClick","disabled"],zt=["onClick"],At={key:0,class:"divider"},Et={class:"grid sm:grid-cols-5 gap-2"},St={class:"flex items-center px-2"},Nt={class:"text-xs font-bold"},It={class:"flex px-2 border-b-2 h-14"},Ut={class:"font-bold text-sm"},Ft={class:"flex items-center space-x-2 px-2"},Ot={class:"w-full"},Tt={class:"border-b-2 text-xs flex justify-between items-center"},jt={class:"text-right"},Bt={class:"border-b-2 text-xs flex justify-between items-center"},Rt={class:"text-right"},Qt={key:1,class:"divider"},Lt={key:2,class:"w-full"},Gt={class:"card-body"},Ht={class:"font-bold"},Jt={class:"font-semibold"},Kt={class:"text-xs"},Wt=t("div",{class:"grid grid-cols-3 gap-2 bg-base-300 rounded-t-md"},[t("div",{class:"p-2 font-bold"},"Data & Respons\xE1vel"),t("div",{class:"p-2 font-bold"},"Evento"),t("div",{class:"p-2 font-bold"},"Descri\xE7\xE3o")],-1),Xt={class:"p-2"},Zt={class:"p-2"},te={class:"p-2"},ie={__name:"Info",props:{context:String,id:Number,company_id:Number|null,date_start:String,date_finish:String,status:String,production_order_products:Array,production_order_parts:Array,production_order_actions:Array,companies:Array,products:Array},setup(c){var q,M,z,A,E;const u=c,P=u.context==="create",h=u.context==="show",f=u.context==="edit",U=[{id:"draft",name:"Rascunho"},{id:"waiting",name:"Pronto para Produ\xE7\xE3o"},{id:"in_production",name:"Em Produ\xE7\xE3o"},{id:"done",name:"Finalizado"},{id:"canceled",name:"Cancelado"}],_=x({id:(q=u.id)!=null?q:null,company_id:(M=u.company_id)!=null?M:null,date_start:(z=w.YYYYMMDDtoDDMMYYYY(u.date_start))!=null?z:null,date_finish:(A=w.YYYYMMDDtoDDMMYYYY(u.date_finish))!=null?A:null,status:(E=u.status)!=null?E:"draft"}),g=x({production_order_id:u.id,product_id:null,quantity:null}),F=()=>{v.Inertia.post(route("production_order.store"),_)},O=()=>{v.Inertia.put(route("production_order.update",u.id),_)},T=l=>{v.Inertia.put(route("production_order_product.increment",u.id),x({production_order_product:l}))},j=l=>{v.Inertia.put(route("production_order_product.decrement",u.id),x({production_order_product:l}))},B=()=>{v.Inertia.post(route("production_order_product.store"),g),g.reset()},R=l=>{v.Inertia.delete(route("production_order_product.destroy",l))};return(l,d)=>{const m=L("font-awesome-icon");return s(),Q(G,null,{header:C(()=>[P?(s(),o(p,{key:0},[Y(" Nova Ordem de Produ\xE7\xE3o ")],64)):r("",!0),h||f?(s(),o(p,{key:1},[Y(" Ordem de Produ\xE7\xE3o ")],64)):r("",!0)]),actions:C(()=>[t("a",{href:l.route("production_order.index"),class:"btn btn-outline mr-2 gap-2"},[n(m,{icon:"fa-solid fa-arrow-left",size:"lg"}),J],8,H),P?(s(),o(p,{key:0},[a(k).canView(l.$page.props.user,{permission:"production_order.create"})?(s(),o("a",{key:0,onClick:d[0]||(d[0]=e=>F()),class:"btn btn-success gap-2"},[n(m,{icon:"fa-solid fa-save",size:"lg"}),K])):r("",!0)],64)):r("",!0),f?(s(),o(p,{key:1},[a(k).canView(l.$page.props.user,{permission:"production_order.update"})?(s(),o("a",{key:0,onClick:d[1]||(d[1]=e=>O()),class:"btn btn-success gap-2"},[n(m,{icon:"fa-solid fa-arrows-rotate",size:"lg"}),W])):r("",!0)],64)):r("",!0),h?(s(),o(p,{key:2},[a(k).canView(l.$page.props.user,{permission:"production_order.read"})&&a(_).status!="draft"?(s(),o("a",{key:0,href:l.route("production_order.print",c.id),target:"_blank",class:"btn btn-accent mr-2 gap-2"},[n(m,{icon:"fa-solid fa-print",size:"lg"}),Z],8,X)):r("",!0),a(k).canView(l.$page.props.user,{permission:"production_order.update"})?(s(),o("a",{key:1,href:l.route("production_order.edit",c.id),class:"btn btn-info mr-2 gap-2"},[n(m,{icon:"fa-solid fa-edit",size:"lg"}),et],8,tt)):r("",!0),a(k).canView(l.$page.props.user,{permission:"production_order.delete"})?(s(),o("a",st,[n(m,{icon:"fa-solid fa-trash",size:"lg"}),ot])):r("",!0),t("div",dt,[t("div",at,[nt,it,t("div",rt,[t("a",{onClick:d[2]||(d[2]=e=>l.destroyProduct()),class:"btn"},"Sim"),lt])])])],64)):r("",!0)]),default:C(()=>[t("div",ct,[n(D,{label:"Empresa",options:c.companies,modelValue:a(_).company_id,"onUpdate:modelValue":d[3]||(d[3]=e=>a(_).company_id=e),disabled:h},null,8,["options","modelValue"]),n($,{label:"Data de In\xEDcio",modelValue:a(_).date_start,"onUpdate:modelValue":d[4]||(d[4]=e=>a(_).date_start=e),disabled:h,mask:"##/##/####"},null,8,["modelValue"]),n($,{label:"Data de T\xE9rmino",modelValue:a(_).date_finish,"onUpdate:modelValue":d[5]||(d[5]=e=>a(_).date_finish=e),disabled:h,mask:"##/##/####"},null,8,["modelValue"]),n(D,{label:"Status",options:U,modelValue:a(_).status,"onUpdate:modelValue":d[6]||(d[6]=e=>a(_).status=e),disabled:h||P},null,8,["modelValue","disabled"])]),ut,t("div",mt,[t("table",_t,[t("thead",null,[t("tr",null,[f?(s(),o("th",pt,"\xA0")):r("",!0),bt,ht])]),t("tbody",null,[f?(s(),o("tr",ft,[t("td",gt,[t("a",vt,[n(m,{icon:"fa-solid fa-add",size:"lg"}),yt]),t("div",kt,[t("div",xt,[Vt,t("div",null,[n(D,{label:"Produto",options:c.products,modelValue:a(g).product_id,"onUpdate:modelValue":d[7]||(d[7]=e=>a(g).product_id=e)},null,8,["options","modelValue"]),n($,{label:"Quantidade",modelValue:a(g).quantity,"onUpdate:modelValue":d[8]||(d[8]=e=>a(g).quantity=e),mask:"#######"},null,8,["modelValue"])]),t("div",wt,[Pt,t("a",{class:"btn",onClick:d[9]||(d[9]=e=>B())},"Adicionar")])])])])])):r("",!0),(s(!0),o(p,null,V(c.production_order_products,(e,b)=>(s(),o("tr",{key:b},[f?(s(),o("td",Ct,[t("a",{class:"btn btn-sm btn-ghost btn-square",onClick:y=>R(e.id)},[n(m,{icon:"fa-solid fa-trash",size:"lg"})],8,Yt)])):r("",!0),t("td",null,i(e.product.name),1),t("td",$t,[f?(s(),o("div",Dt,[t("label",qt,[t("button",{onClick:y=>j(e.id),class:"btn btn-sm btn-ghost",disabled:e.quantity<=1},[n(m,{icon:"fa-solid fa-minus"})],8,Mt),t("span",null,i(e.quantity),1),t("button",{onClick:y=>T(e.id),class:"btn btn-sm btn-ghost"},[n(m,{icon:"fa-solid fa-plus"})],8,zt)])])):(s(),o(p,{key:1},[Y(i(e.quantity),1)],64))])]))),128))])])]),c.production_order_parts.length?(s(),o("div",At,"Etapas de Produ\xE7\xE3o")):r("",!0),t("div",Et,[(s(!0),o(p,null,V(c.production_order_parts,(e,b)=>{var y,S,N,I;return s(),o("div",{key:b,class:"card card-compact bg-base-100 shadow-xl mb-2"},[t("div",St,[t("div",Nt,i((y=e.product_recipe)==null?void 0:y.product.name),1)]),t("div",It,[t("div",Ut,i(e.quantity)+"x "+i((S=e.product_recipe)==null?void 0:S.part.name),1)]),t("div",Ft,[t("div",Ot,[t("div",Tt,[n(m,{icon:"fas fa-percentage"}),t("div",jt,i((N=e.done)!=null?N:0)+" de "+i(e.quantity),1)]),t("div",Bt,[n(m,{icon:"fas fa-dharmachakra"}),t("div",Rt,i((I=e.product_recipe.part.machinery.name)!=null?I:"---"),1)])])])])}),128))]),c.production_order_actions.length?(s(),o("div",Qt,"Registros")):r("",!0),c.production_order_actions.length?(s(),o("div",Lt,[(s(!0),o(p,null,V(c.production_order_actions,(e,b)=>(s(),o("div",{key:b,class:"card card-compact mb-2 w-full bg-base-100 shadow-xl sm:hidden"},[t("div",Gt,[t("div",Ht,i(a(w).toFormatedString(e.created_at))+" - "+i(e.user.name),1),t("div",Jt,i(e.action.description),1),t("div",Kt,i(e.description),1)])]))),128)),Wt,(s(!0),o(p,null,V(c.production_order_actions,(e,b)=>(s(),o("div",{key:b,class:"grid grid-cols-3 gap-2 bg-base-100 rounded-b-md"},[t("div",Xt,i(a(w).toFormatedString(e.created_at))+" - "+i(e.user.name),1),t("div",Zt,i(e.action.description),1),t("div",te,i(e.description),1)]))),128))])):r("",!0)]),_:1})}}};export{ie as default};
