import{u as g,j as q,k as V,h as Y,o as d,c as n,l as w,F as b,e as l,d as e,a,b as i,i as G,m as H,t as v,q as p}from"./app.c0934f99.js";import{_ as J,A as k}from"./AppLayout.b5c1bae9.js";import{_ as C}from"./InputText.230fb108.js";import{_ as D}from"./InputSelect.4b9144ff.js";import{_ as K}from"./ChartLineTimeSerie.64e0b071.js";import{T as S}from"./time.util.04a5000e.js";import"./pt-br.a403408c.js";const W=["href"],X=e("span",{class:"hidden sm:inline-block"},"Voltar",-1),Z=e("span",{class:"hidden sm:inline-block"},"Salvar",-1),I=e("span",{class:"hidden sm:inline-block"},"Atualizar",-1),R=["href"],ee=e("span",{class:"hidden sm:inline-block"},"Editar",-1),te={key:1,href:"#deleteModal",class:"btn btn-error gap-2"},oe=e("span",{class:"hidden sm:inline-block"},"Excluir",-1),se={class:"modal",id:"deleteModal"},ae={class:"modal-box"},de=e("h3",{class:"font-bold text-lg"},"Excluir Empresa",-1),ne=e("p",{class:"py-4"},"Tem certeza de que quer excluir essa empresa? Essa opera\xE7\xE3o n\xE3o poder\xE1 ser defeita.",-1),ie={class:"modal-action"},le=e("a",{href:"#",class:"btn"},"N\xE3o",-1),re={class:"grid sm:grid-cols-4 gap-2"},ce={key:0,class:"divider"},ue={key:1,class:"grid sm:grid-cols-4 gap-2 my-2"},pe={href:"#addProductModal",class:"btn w-full sm:col-span-4 gap-2"},me=e("span",{class:"hidden sm:inline-block"},"Adicionar Etapa de Produto",-1),_e={class:"modal",id:"addProductModal"},be={class:"modal-box"},fe=e("h3",{class:"font-bold text-lg"},"Adicionar Etapa de Produto",-1),he={class:"modal-action"},ge=e("a",{href:"#",class:"btn"},"Cancelar",-1),ve={class:"grid sm:grid-cols-5 gap-1"},ke={class:"flex items-center space-x-2 h-14 p-2 bg-base-300"},ye={class:"text-sm"},xe={class:"flex items-center space-x-2 px-2"},Ve={class:"w-full"},we={class:"border-b-2 text-xs flex justify-between items-center"},Ce={class:"text-right"},Pe={class:"border-b-2 text-xs flex justify-between items-center"},$e={class:"text-right"},Ae={key:0,class:"bg-base-300/25 grid grid-cols-4 gap-1"},Te=["onClick","disabled"],Ne=["onClick"],Ee=["onClick"],ze=["onClick","disabled"],Ue={class:"mt-4"},Oe={__name:"Info",props:{context:String,id:Number,company_id:Number|null,name:String,productAverageProductionTime:Number|null,productRecipe:Array,companies:Array,machineries:Array,parts:Array,times_per_products:Array},setup(u){var A,T,N,E;const r=u,y=S.secondsToTimestamp(r.productAverageProductionTime),P=r.context==="create",f=r.context==="show",h=r.context==="edit",m=g({id:(A=r.id)!=null?A:null,company_id:(T=r.company_id)!=null?T:null,name:(N=r.name)!=null?N:null}),_=g({product_id:(E=r.id)!=null?E:null,part_id:null,machinery_id:null,order:r.productRecipe.length+1,quantity:null}),M=()=>{p.Inertia.delete(route("product.destroy",r.id))},B=()=>{p.Inertia.post(route("product.store"),m)},F=()=>{p.Inertia.put(route("product.update",r.id),m)},$=o=>{p.Inertia.delete(route("product_recipe.destroy",o.id),g({product_id:o.productId}))},j=o=>{p.Inertia.put(route("product_recipe.update",o.id),g({id:o.id,product_id:o.productId,order:o.order+1}))},O=o=>{p.Inertia.put(route("product_recipe.update",o.id),g({id:o.id,product_id:o.productId,order:o.order-1}))},L=()=>{_.order=r.productRecipe.length+1,p.Inertia.post(route("product_recipe.store"),_)};return(o,s)=>{const c=Y("font-awesome-icon");return d(),q(J,null,{header:V(()=>[P?(d(),n(b,{key:0},[w(" Novo Produto ")],64)):l("",!0),f||h?(d(),n(b,{key:1},[w(" Produto ")],64)):l("",!0)]),actions:V(()=>[e("a",{href:o.route("product.index"),class:"btn btn-outline mr-2 gap-2"},[a(c,{icon:"fa-solid fa-arrow-left",size:"lg"}),X],8,W),P?(d(),n(b,{key:0},[i(k).canView(o.$page.props.user,{permission:"product.create"})?(d(),n("a",{key:0,onClick:s[0]||(s[0]=t=>B()),class:"btn btn-success gap-2"},[a(c,{icon:"fa-solid fa-save",size:"lg"}),Z])):l("",!0)],64)):l("",!0),h?(d(),n(b,{key:1},[i(k).canView(o.$page.props.user,{permission:"product.update"})?(d(),n("a",{key:0,onClick:s[1]||(s[1]=t=>F()),class:"btn btn-success gap-2"},[a(c,{icon:"fa-solid fa-arrows-rotate",size:"lg"}),I])):l("",!0)],64)):l("",!0),f?(d(),n(b,{key:2},[i(k).canView(o.$page.props.user,{permission:"product.update"})?(d(),n("a",{key:0,href:o.route("product.edit",u.id),class:"btn btn-info mr-2 gap-2"},[a(c,{icon:"fa-solid fa-edit",size:"lg"}),ee],8,R)):l("",!0),i(k).canView(o.$page.props.user,{permission:"product.delete"})?(d(),n("a",te,[a(c,{icon:"fa-solid fa-trash",size:"lg"}),oe])):l("",!0),e("div",se,[e("div",ae,[de,ne,e("div",ie,[e("a",{onClick:s[2]||(s[2]=t=>M()),class:"btn"},"Sim"),le])])])],64)):l("",!0)]),default:V(()=>[e("div",re,[a(D,{label:"Empresa",options:u.companies,modelValue:i(m).company_id,"onUpdate:modelValue":s[3]||(s[3]=t=>i(m).company_id=t),disabled:f},null,8,["options","modelValue"]),a(C,{label:"Nome",modelValue:i(m).name,"onUpdate:modelValue":s[4]||(s[4]=t=>i(m).name=t),disabled:f},null,8,["modelValue"]),f?(d(),q(C,{key:0,label:"Tempo M\xE9dio de Produ\xE7\xE3o",modelValue:i(y),"onUpdate:modelValue":s[5]||(s[5]=t=>G(y)?y.value=t:null),disabled:""},null,8,["modelValue"])):l("",!0)]),u.productRecipe.length||h?(d(),n("div",ce,"Etapa de Produto")):l("",!0),h?(d(),n("div",ue,[e("a",pe,[a(c,{icon:"fa-solid fa-add",size:"lg"}),me]),e("div",_e,[e("div",be,[fe,e("div",null,[a(D,{label:"Etapa",options:u.parts,modelValue:i(_).part_id,"onUpdate:modelValue":s[6]||(s[6]=t=>i(_).part_id=t)},null,8,["options","modelValue"]),a(C,{label:"Quantidade",mask:"#######",modelValue:i(_).quantity,"onUpdate:modelValue":s[7]||(s[7]=t=>i(_).quantity=t)},null,8,["modelValue"]),w(" d ")]),e("div",he,[ge,e("a",{class:"btn",href:"#",onClick:s[8]||(s[8]=t=>L())},"Adicionar")])])])])):l("",!0),e("div",ve,[(d(!0),n(b,null,H(u.productRecipe,(t,Q)=>{var z,U;return d(),n("div",{key:Q,class:"card card-compact bg-base-100 border-[1px] border-gray-500"},[e("div",ke,[e("div",null,[e("div",ye,v(t.quantity)+"x "+v(t.partName),1)])]),e("div",xe,[e("div",Ve,[e("div",we,[a(c,{icon:"fas fa-dharmachakra"}),e("div",Ce,v((z=t.machineryName)!=null?z:"---"),1)]),e("div",Pe,[a(c,{icon:"fas fa-clock"}),e("div",$e,v((U=i(S).secondsToTimestamp(t.partAverageProductionTime))!=null?U:"---"),1)])])]),h?(d(),n("div",Ae,[e("button",{class:"btn btn-ghost btn-sm w-full gap-2",onClick:x=>O(t),disabled:t.order<=1},[a(c,{icon:"fa-solid fa-down-long"})],8,Te),e("button",{class:"btn btn-ghost btn-sm w-full gap-2",onClick:x=>$(t)},[a(c,{icon:"fa-solid fa-edit"})],8,Ne),e("button",{class:"btn btn-ghost btn-sm w-full gap-2",onClick:x=>$(t)},[a(c,{icon:"fa-solid fa-trash"})],8,Ee),e("button",{class:"btn btn-ghost btn-sm w-full gap-2",onClick:x=>j(t),disabled:t.order===u.productRecipe.length},[a(c,{icon:"fa-solid fa-up-long"})],8,ze)])):l("",!0)])}),128))]),e("div",Ue,[a(K,{label:"Tempo m\xE9dio YTD",chartData:u.times_per_products},null,8,["chartData"])])]),_:1})}}};export{Oe as default};
