import{_ as S}from"./AppLayout.b5c1bae9.js";import{T as v}from"./time.util.04a5000e.js";import{_ as g}from"./InputText.230fb108.js";import{V}from"./VueQrcodeReader.umd.min.d796b036.js";import{r as R,j as N,k as b,h as P,o as r,l as T,d as o,a as m,b as n,i as y,c as i,t as d,e as C,m as x,F as k,n as M,q as D}from"./app.c0934f99.js";import"./pt-br.a403408c.js";const Y=["href"],A=o("span",{class:"hidden sm:inline-block"},"Voltar",-1),I={class:"grid grid-cols-2 gap-2 px-2 mb-2"},q=o("label",{for:"checkProductionOrderModal",class:"btn btn-primary btn-block mb-2 gap-2"},[o("span",null,"Validar")],-1),B=o("input",{type:"checkbox",id:"checkProductionOrderModal",class:"modal-toggle"},null,-1),F={class:"modal"},U={class:"modal-box"},$=o("h3",{class:"font-bold text-center text-lg"},"Verifique a Ordem de Produ\xE7\xE3o",-1),j=o("p",{class:"py-4 text-center"},"Aponte a c\xE2mera do celular para o c\xF3digo no canto superior da p\xE1gina",-1),z={key:0,class:"alert alert-error shadow-lg mt-2"},H=o("svg",{xmlns:"http://www.w3.org/2000/svg",class:"stroke-current flex-shrink-0 h-6 w-6",fill:"none",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),Q={class:"flex flex-col"},L=["disabled"],G={class:""},J=o("div",{class:"col-span-2 bg-base-300 rounded-t-md p-2 font-semibold"}," Produto ",-1),K={class:""},W=o("div",{class:"col-span-2 bg-base-300 p-2 font-semibold"}," Etapas de Produto ",-1),X=o("div",{class:""},[o("div",{class:"col-span-2 bg-base-300 rounded-b-md p-2 font-semibold"})],-1),re={__name:"Start",props:{id:Number,company:Object,progress:Number,status:String,date_start:String,date_finish:String,production_order_products:Array,production_order_parts:Array},setup(u){const a=u,p=v.toFormatedString(a.date_start,"DD/MM/YYYY"),_=v.toFormatedString(a.date_finish,"DD/MM/YYYY");let f=R(!1),l=R(null);const h=async s=>{try{await s}catch(e){e.name==="NotAllowedError"?e.value="ERROR: you need to grant camera access permission":e.name==="NotFoundError"?e.value="ERROR: no camera on this device":e.name==="NotSupportedError"?e.value="ERROR: secure context required (HTTPS, localhost)":e.name==="NotReadableError"?e.value="ERROR: is the camera already in use?":e.name==="OverconstrainedError"?e.value="ERROR: installed cameras are not suitable":e.name==="StreamApiNotSupportedError"?e.value="ERROR: Stream API is not supported in this browser":e.name==="InsecureContextError"?e.value="ERROR: Camera access is only permitted in secure context. Use HTTPS or localhost rather than HTTP.":e.value=`ERROR: Camera error (${e.name})`}},E=s=>{console.log(s,"company."+a.company.id+".production_order."+a.id);const e="company."+a.company.id+".production_order."+a.id;if(s===e)f.value=!0;else{const c="Ordem de Produ\xE7\xE3o errada.";l.value=c,setTimeout(()=>{l.value===c&&(l.value="")},5e3)}},w=()=>{D.Inertia.get(route("production_order.confirmMachinery",a.id))};return(s,e)=>{const c=P("font-awesome-icon");return r(),N(S,null,{header:b(()=>[T(" Iniciar Ordem de Produ\xE7\xE3o ")]),actions:b(()=>[o("a",{href:s.route("dashboard.index"),class:"btn btn-outline mr-2 gap-2"},[m(c,{icon:"fa-solid fa-arrow-left",size:"lg"}),A],8,Y)]),default:b(()=>[o("div",I,[o("div",null,[m(g,{label:"Data de In\xEDcio",modelValue:n(p),"onUpdate:modelValue":e[0]||(e[0]=t=>y(p)?p.value=t:null),disabled:""},null,8,["modelValue"])]),o("div",null,[m(g,{label:"Data de T\xE9rmino",modelValue:n(_),"onUpdate:modelValue":e[1]||(e[1]=t=>y(_)?_.value=t:null),disabled:""},null,8,["modelValue"])])]),q,B,o("div",F,[o("div",U,[$,j,m(n(V.exports.QrcodeStream),{onDecode:E,onInit:h}),n(l)?(r(),i("div",z,[o("div",null,[H,o("span",null,d(n(l)),1)])])):C("",!0),o("div",Q,[o("button",{onClick:e[2]||(e[2]=t=>w()),class:"btn btn-primary btn-block my-2",disabled:!n(f)},"Avan\xE7ar",8,L),o("label",{for:"checkProductionOrderModal",class:"btn btn-secondary btn-block",onClick:h},"Cancelar")])])]),o("div",G,[J,(r(!0),i(k,null,x(u.production_order_products,t=>(r(),i("div",{key:"pop_"+t.id,class:"col-span-2 p-2 text-sm"},d(t.quantity)+"x "+d(t.product.name),1))),128))]),o("div",K,[W,(r(!0),i(k,null,x(u.production_order_parts,(t,O)=>(r(),i("div",{key:"pop_"+t.id,class:M(["col-span-2 p-2 text-sm",{"bg-white/75":O%2,"line-through":!(t.quantity-t.done)}])},d(t.quantity-t.done)+"x "+d(t.product_recipe.part.name),3))),128))]),X]),_:1})}}};export{re as default};
