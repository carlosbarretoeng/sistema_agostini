import{_ as T}from"./AppLayout.b5c1bae9.js";import"./pt-br.a403408c.js";import{V as N}from"./VueQrcodeReader.umd.min.d796b036.js";import{r as d,j as O,k as _,h as P,o as a,l as S,d as t,a as b,b as n,c as r,t as x,e as h,F as m,m as V,q as A}from"./app.c0934f99.js";const C=["href"],D=t("span",{class:"hidden sm:inline-block"},"Voltar",-1),q={key:0},I=t("h3",{class:"font-bold text-center text-lg"},"Verifique a Esta\xE7\xE3o e a Etapa de Trabalho a ser feita",-1),B=t("p",{class:"py-4 text-center"},"Aponte a c\xE2mera do celular para o c\xF3digo ao lado da descri\xE7\xE3o da Esta\xE7\xE3o de Trabalho",-1),j={key:0,class:"alert alert-error shadow-lg mt-2"},z=t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"stroke-current flex-shrink-0 h-6 w-6",fill:"none",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),Q={key:1},$=t("h3",{class:"font-bold text-center text-lg"},"Verifique a sua lista de produ\xE7\xE3o",-1),F=t("p",{class:"py-4 text-center"},"Para realizar essa atividade, voc\xEA precisar\xE1 produzir:",-1),H={key:0,class:"text-center"},M=t("p",{class:"py-4 text-center"},"Ao clicar em 'Avan\xE7ar', abaixo, o tempo de produ\xE7\xE3o come\xE7ar\xE1 a contar.",-1),L=t("h3",{class:"font-bold text-center text-lg"},"A Etapa de Produ\xE7\xE3o j\xE1 foi conclu\xEDda",-1),U=t("p",{class:"py-4 text-center"},"Ao clicar em 'Voltar', abaixo, para selecionar uma nova etapa.",-1),G={key:2,class:"flex flex-col"},Y={__name:"ConfirmMachinery",props:{id:Number,company:Object,progress:Number,status:String,qrcodes:Array},setup(R){const f=R;let y=d(""),u=d(""),v=d(""),p=d(!1),l=d(null);const k=async i=>{try{await i}catch(e){e.name==="NotAllowedError"?e.value="ERROR: you need to grant camera access permission":e.name==="NotFoundError"?e.value="ERROR: no camera on this device":e.name==="NotSupportedError"?e.value="ERROR: secure context required (HTTPS, localhost)":e.name==="NotReadableError"?e.value="ERROR: is the camera already in use?":e.name==="OverconstrainedError"?e.value="ERROR: installed cameras are not suitable":e.name==="StreamApiNotSupportedError"?e.value="ERROR: Stream API is not supported in this browser":e.name==="InsecureContextError"?e.value="ERROR: Camera access is only permitted in secure context. Use HTTPS or localhost rather than HTTP.":e.value=`ERROR: Camera error (${e.name})`}},E=i=>{let e=f.qrcodes.filter(o=>o[0]===i);if(y.value=e,u.value=e.map(o=>o[1]),v.value=e.map(o=>o[2]),e.length)p.value=!0;else{const o="Esta\xE7\xE3o de Trabalho ou Etapa inv\xE1lidos.";l.value=o,setTimeout(()=>{l.value===o&&(l.value="")},5e3)}},g=()=>{A.Inertia.post(route("times.startProduction"),{production_order:f.id,production_order_parts:v.value})},w=()=>{p.value=!1};return(i,e)=>{const o=P("font-awesome-icon");return a(),O(T,null,{header:_(()=>[S(" Iniciar Ordem de Produ\xE7\xE3o ")]),actions:_(()=>[t("a",{href:i.route("dashboard.index"),class:"btn btn-outline mr-2 gap-2"},[b(o,{icon:"fa-solid fa-arrow-left",size:"lg"}),D],8,C)]),default:_(()=>[n(p)?(a(),r("div",Q,[n(u).reduce((s,c)=>s+c[0],0)>0?(a(),r(m,{key:0},[$,F,t("div",null,[(a(!0),r(m,null,V(n(u),(s,c)=>(a(),r(m,{key:c},[s[0]>0?(a(),r("div",H,x(s),1)):h("",!0)],64))),128))]),M],64)):(a(),r(m,{key:1},[L,U],64)),n(u).reduce((s,c)=>s+c[0],0)>0?(a(),r("div",G,[t("button",{onClick:e[0]||(e[0]=s=>g()),class:"btn btn-primary btn-block my-2"},"Avan\xE7ar")])):h("",!0),t("button",{onClick:e[1]||(e[1]=s=>w()),class:"btn btn-secondary btn-block my-2"},"Voltar")])):(a(),r("div",q,[I,B,b(n(N.exports.QrcodeStream),{onDecode:E,onInit:k}),n(l)?(a(),r("div",j,[t("div",null,[z,t("span",null,x(n(l)),1)])])):h("",!0)]))]),_:1})}}};export{Y as default};
