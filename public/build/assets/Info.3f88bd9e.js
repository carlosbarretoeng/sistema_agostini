import{u as V,g as j,h as C,o as e,c as o,e as a,d as t,a as i,b as n,F as p,i as w,t as r,j as D,m as v,k as Q}from"./app.731ac8b3.js";import{_ as R,A as y}from"./AppLayout.8921b030.js";import{_ as Y}from"./InputText.04132902.js";import{_ as $}from"./InputSelect.a433c38d.js";import{T as x}from"./time.util.50ccb93e.js";import"./pt-br.84fb1075.js";const L=D(" Nova Ordem de Produ\xE7\xE3o "),G=D(" Ordem de Produ\xE7\xE3o "),H=["href"],J=t("span",{class:"hidden sm:inline-block"},"Voltar",-1),K=t("span",{class:"hidden sm:inline-block"},"Salvar",-1),W=t("span",{class:"hidden sm:inline-block"},"Atualizar",-1),X=["href"],Z=t("span",{class:"hidden sm:inline-block"},"Imprimir",-1),tt=["href"],st=t("span",{class:"hidden sm:inline-block"},"Editar",-1),et={key:2,href:"#deleteModal",class:"btn btn-error gap-2"},ot=t("span",{class:"hidden sm:inline-block"},"Excluir",-1),dt={class:"modal",id:"deleteModal"},nt={class:"modal-box"},at=t("h3",{class:"font-bold text-lg"},"Excluir Empresa",-1),it=t("p",{class:"py-4"},"Tem certeza de que quer excluir essa empresa? Essa opera\xE7\xE3o n\xE3o poder\xE1 ser defeita.",-1),lt={class:"modal-action"},rt=t("a",{href:"#",class:"btn"},"N\xE3o",-1),ct={class:"grid sm:grid-cols-4 gap-2"},ut=t("div",{class:"divider"},"Produtos",-1),_t={class:""},mt={class:"table table-compact w-full"},pt={key:0,class:"w-1 text-center bg-base-300"},ht=t("th",{class:"bg-base-300"},"Produto",-1),bt=t("th",{class:"w-1/6 text-center bg-base-300"},"Quantidade",-1),ft={key:0},gt={colspan:"3"},vt={href:"#addProductModal",class:"btn w-full gap-2"},kt=t("span",{class:"hidden sm:inline-block"},"Adicionar Produto",-1),yt={class:"modal",id:"addProductModal"},Vt={class:"modal-box"},wt=t("h3",{class:"font-bold text-lg"},"Adicionar Produto",-1),xt={class:"modal-action"},Pt=t("a",{href:"#",class:"btn"},"Cancelar",-1),Ct={key:0},Yt=["onClick"],$t={class:"text-center"},Dt={key:0,class:"form-control"},zt={class:"input-group w-full justify-center"},Mt=["onClick","disabled"],qt=["onClick"],At={key:0,class:"divider"},Et={class:"grid sm:grid-cols-3 gap-2"},St={class:"flex items-center space-x-2 h-12 p-2 border-b-2"},Nt={class:"font-bold"},It={class:"flex items-center space-x-2 px-2"},Ut={class:"w-full"},Ft={class:"grid grid-cols-3 font-light"},Ot=t("div",{class:"col-span-2 font-semibold"},"Quantidade j\xE1 produzida:",-1),Tt={class:"text-right"},Bt={key:1,class:"divider"},jt={key:2,class:"w-full"},Qt={class:"card-body"},Rt={class:"font-bold"},Lt={class:"font-semibold"},Gt={class:"text-xs"},Ht=t("div",{class:"grid grid-cols-3 gap-2 bg-base-300 rounded-t-md"},[t("div",{class:"p-2 font-bold"},"Data & Respons\xE1vel"),t("div",{class:"p-2 font-bold"},"Evento"),t("div",{class:"p-2 font-bold"},"Descri\xE7\xE3o")],-1),Jt={class:"p-2"},Kt={class:"p-2"},Wt={class:"p-2"},ds={__name:"Info",props:{context:String,id:Number,company_id:Number|null,date_start:String,date_finish:String,status:String,production_order_products:Array,production_order_parts:Array,production_order_actions:Array,companies:Array,products:Array},setup(c){var z,M,q,A,E;const u=c,P=u.context==="create",b=u.context==="show",f=u.context==="edit",N=[{id:"draft",name:"Rascunho"},{id:"waiting",name:"Pronto para Produ\xE7\xE3o"},{id:"in_production",name:"Em Produ\xE7\xE3o"},{id:"done",name:"Finalizado"},{id:"canceled",name:"Cancelado"}],_=V({id:(z=u.id)!=null?z:null,company_id:(M=u.company_id)!=null?M:null,date_start:(q=x.YYYYMMDDtoDDMMYYYY(u.date_start))!=null?q:null,date_finish:(A=x.YYYYMMDDtoDDMMYYYY(u.date_finish))!=null?A:null,status:(E=u.status)!=null?E:"draft"}),g=V({production_order_id:u.id,product_id:null,quantity:null}),I=()=>{v.Inertia.post(route("production_order.store"),_)},U=()=>{v.Inertia.put(route("production_order.update",u.id),_)},F=l=>{v.Inertia.put(route("production_order_product.increment",u.id),V({production_order_product:l}))},O=l=>{v.Inertia.put(route("production_order_product.decrement",u.id),V({production_order_product:l}))},T=()=>{v.Inertia.post(route("production_order_product.store"),g),g.reset()},B=l=>{v.Inertia.delete(route("production_order_product.destroy",l))};return(l,d)=>{const m=Q("font-awesome-icon");return e(),j(R,null,{header:C(()=>[P?(e(),o(p,{key:0},[L],64)):a("",!0),b||f?(e(),o(p,{key:1},[G],64)):a("",!0)]),actions:C(()=>[t("a",{href:l.route("production_order.index"),class:"btn btn-outline mr-2 gap-2"},[i(m,{icon:"fa-solid fa-arrow-left",size:"lg"}),J],8,H),P?(e(),o(p,{key:0},[n(y).canView(l.$page.props.user,{permission:"production_order.create"})?(e(),o("a",{key:0,onClick:d[0]||(d[0]=s=>I()),class:"btn btn-success gap-2"},[i(m,{icon:"fa-solid fa-save",size:"lg"}),K])):a("",!0)],64)):a("",!0),f?(e(),o(p,{key:1},[n(y).canView(l.$page.props.user,{permission:"production_order.update"})?(e(),o("a",{key:0,onClick:d[1]||(d[1]=s=>U()),class:"btn btn-success gap-2"},[i(m,{icon:"fa-solid fa-arrows-rotate",size:"lg"}),W])):a("",!0)],64)):a("",!0),b?(e(),o(p,{key:2},[n(y).canView(l.$page.props.user,{permission:"production_order.read"})?(e(),o("a",{key:0,href:l.route("production_order.print",c.id),target:"_blank",class:"btn btn-accent mr-2 gap-2"},[i(m,{icon:"fa-solid fa-print",size:"lg"}),Z],8,X)):a("",!0),n(y).canView(l.$page.props.user,{permission:"production_order.update"})?(e(),o("a",{key:1,href:l.route("production_order.edit",c.id),class:"btn btn-info mr-2 gap-2"},[i(m,{icon:"fa-solid fa-edit",size:"lg"}),st],8,tt)):a("",!0),n(y).canView(l.$page.props.user,{permission:"production_order.delete"})?(e(),o("a",et,[i(m,{icon:"fa-solid fa-trash",size:"lg"}),ot])):a("",!0),t("div",dt,[t("div",nt,[at,it,t("div",lt,[t("a",{onClick:d[2]||(d[2]=s=>l.destroyProduct()),class:"btn"},"Sim"),rt])])])],64)):a("",!0)]),default:C(()=>[t("div",ct,[i($,{label:"Empresa",options:c.companies,modelValue:n(_).company_id,"onUpdate:modelValue":d[3]||(d[3]=s=>n(_).company_id=s),disabled:b},null,8,["options","modelValue"]),i(Y,{label:"Data de In\xEDcio",modelValue:n(_).date_start,"onUpdate:modelValue":d[4]||(d[4]=s=>n(_).date_start=s),disabled:b,mask:"##/##/####"},null,8,["modelValue"]),i(Y,{label:"Data de T\xE9rmino",modelValue:n(_).date_finish,"onUpdate:modelValue":d[5]||(d[5]=s=>n(_).date_finish=s),disabled:b,mask:"##/##/####"},null,8,["modelValue"]),i($,{label:"Status",options:N,modelValue:n(_).status,"onUpdate:modelValue":d[6]||(d[6]=s=>n(_).status=s),disabled:b||P},null,8,["modelValue","disabled"])]),ut,t("div",_t,[t("table",mt,[t("thead",null,[t("tr",null,[f?(e(),o("th",pt,"\xA0")):a("",!0),ht,bt])]),t("tbody",null,[f?(e(),o("tr",ft,[t("td",gt,[t("a",vt,[i(m,{icon:"fa-solid fa-add",size:"lg"}),kt]),t("div",yt,[t("div",Vt,[wt,t("div",null,[i($,{label:"Produto",options:c.products,modelValue:n(g).product_id,"onUpdate:modelValue":d[7]||(d[7]=s=>n(g).product_id=s)},null,8,["options","modelValue"]),i(Y,{label:"Quantidade",modelValue:n(g).quantity,"onUpdate:modelValue":d[8]||(d[8]=s=>n(g).quantity=s),mask:"##"},null,8,["modelValue"])]),t("div",xt,[Pt,t("a",{class:"btn",onClick:d[9]||(d[9]=s=>T())},"Adicionar")])])])])])):a("",!0),(e(!0),o(p,null,w(c.production_order_products,(s,h)=>(e(),o("tr",{key:h},[f?(e(),o("td",Ct,[t("a",{class:"btn btn-sm btn-ghost btn-square",onClick:k=>B(s.id)},[i(m,{icon:"fa-solid fa-trash",size:"lg"})],8,Yt)])):a("",!0),t("td",null,r(s.product.name),1),t("td",$t,[f?(e(),o("div",Dt,[t("label",zt,[t("button",{onClick:k=>O(s.id),class:"btn btn-sm btn-ghost",disabled:s.quantity<=1},[i(m,{icon:"fa-solid fa-minus"})],8,Mt),t("span",null,r(s.quantity),1),t("button",{onClick:k=>F(s.id),class:"btn btn-sm btn-ghost"},[i(m,{icon:"fa-solid fa-plus"})],8,qt)])])):(e(),o(p,{key:1},[D(r(s.quantity),1)],64))])]))),128))])])]),c.production_order_parts.length?(e(),o("div",At,"Etapas de Produ\xE7\xE3o")):a("",!0),t("div",Et,[(e(!0),o(p,null,w(c.production_order_parts,(s,h)=>{var k,S;return e(),o("div",{key:h,class:"card card-compact bg-base-100 shadow-xl mb-2"},[t("div",St,[t("div",Nt,r(s.quantity)+"x "+r((k=s.product_recipe)==null?void 0:k.part.name),1)]),t("div",It,[t("div",Ut,[t("div",Ft,[Ot,t("div",Tt,r((S=s.done)!=null?S:0*100)+"/"+r(s.quantity),1)])])])])}),128))]),c.production_order_actions.length?(e(),o("div",Bt,"Registros")):a("",!0),c.production_order_actions.length?(e(),o("div",jt,[(e(!0),o(p,null,w(c.production_order_actions,(s,h)=>(e(),o("div",{key:h,class:"card card-compact mb-2 w-full bg-base-100 shadow-xl sm:hidden"},[t("div",Qt,[t("div",Rt,r(n(x).toFormatedString(s.created_at))+" - "+r(s.user.name),1),t("div",Lt,r(s.action.description),1),t("div",Gt,r(s.description),1)])]))),128)),Ht,(e(!0),o(p,null,w(c.production_order_actions,(s,h)=>(e(),o("div",{key:h,class:"grid grid-cols-3 gap-2 bg-base-100 rounded-b-md"},[t("div",Jt,r(n(x).toFormatedString(s.created_at))+" - "+r(s.user.name),1),t("div",Kt,r(s.action.description),1),t("div",Wt,r(s.description),1)]))),128))])):a("",!0)]),_:1})}}};export{ds as default};
