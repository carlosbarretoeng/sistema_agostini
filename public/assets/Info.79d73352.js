import{u as x,g as R,h as C,o as e,c as o,e as i,d as t,a as l,b as n,F as _,i as V,t as a,j as D,m as v,k as L}from"./app.775a790a.js";import{_ as G,A as k}from"./AppLayout.f70166d9.js";import{_ as Y}from"./InputText.df88593f.js";import{_ as $}from"./InputSelect.58f54399.js";import{T as w}from"./time.util.35ebe2bf.js";import"./pt-br.b727be27.js";const H=D(" Nova Ordem de Produ\xE7\xE3o "),J=D(" Ordem de Produ\xE7\xE3o "),K=["href"],W=t("span",{class:"hidden sm:inline-block"},"Voltar",-1),X=t("span",{class:"hidden sm:inline-block"},"Salvar",-1),Z=t("span",{class:"hidden sm:inline-block"},"Atualizar",-1),tt=["href"],st=t("span",{class:"hidden sm:inline-block"},"Imprimir",-1),et=["href"],ot=t("span",{class:"hidden sm:inline-block"},"Editar",-1),dt={key:2,href:"#deleteModal",class:"btn btn-error gap-2"},nt=t("span",{class:"hidden sm:inline-block"},"Excluir",-1),at={class:"modal",id:"deleteModal"},it={class:"modal-box"},lt=t("h3",{class:"font-bold text-lg"},"Excluir Empresa",-1),rt=t("p",{class:"py-4"},"Tem certeza de que quer excluir essa empresa? Essa opera\xE7\xE3o n\xE3o poder\xE1 ser defeita.",-1),ct={class:"modal-action"},ut=t("a",{href:"#",class:"btn"},"N\xE3o",-1),mt={class:"grid sm:grid-cols-4 gap-2"},pt=t("div",{class:"divider"},"Produtos",-1),_t={class:""},ht={class:"table table-compact w-full"},bt={key:0,class:"w-1 text-center bg-base-300"},ft=t("th",{class:"bg-base-300"},"Produto",-1),gt=t("th",{class:"w-1/6 text-center bg-base-300"},"Quantidade",-1),vt={key:0},yt={colspan:"3"},kt={href:"#addProductModal",class:"btn w-full gap-2"},xt=t("span",{class:"hidden sm:inline-block"},"Adicionar Produto",-1),Vt={class:"modal",id:"addProductModal"},wt={class:"modal-box"},Pt=t("h3",{class:"font-bold text-lg"},"Adicionar Produto",-1),Ct={class:"modal-action"},Yt=t("a",{href:"#",class:"btn"},"Cancelar",-1),$t={key:0},Dt=["onClick"],zt={class:"text-center"},Et={key:0,class:"form-control"},Mt={class:"input-group w-full justify-center"},qt=["onClick","disabled"],At=["onClick"],St={key:0,class:"divider"},Nt={class:"grid sm:grid-cols-3 gap-2"},It={class:"flex items-center px-2"},Ut={class:"text-xs font-bold"},Ft={class:"flex px-2 border-b-2"},Tt={class:"font-bold"},Ot={class:"flex items-center space-x-2 px-2"},Bt={class:"w-full"},jt={class:"grid grid-cols-3 font-light"},Qt=t("div",{class:"col-span-3 sm:col-span-2 font-semibold"},"Quantidade j\xE1 produzida:",-1),Rt={class:"col-span-3 sm:col-span-1 sm:text-right pl-4 sm:pl-0"},Lt={class:"grid grid-cols-3 font-light"},Gt=t("div",{class:"col-span-3 sm:col-span-2 font-semibold"},"Esta\xE7\xE3o de Trabalho:",-1),Ht={class:"col-span-3 sm:col-span-1 sm:text-right pl-4 sm:pl-0"},Jt={key:1,class:"divider"},Kt={key:2,class:"w-full"},Wt={class:"card-body"},Xt={class:"font-bold"},Zt={class:"font-semibold"},ts={class:"text-xs"},ss=t("div",{class:"grid grid-cols-3 gap-2 bg-base-300 rounded-t-md"},[t("div",{class:"p-2 font-bold"},"Data & Respons\xE1vel"),t("div",{class:"p-2 font-bold"},"Evento"),t("div",{class:"p-2 font-bold"},"Descri\xE7\xE3o")],-1),es={class:"p-2"},os={class:"p-2"},ds={class:"p-2"},us={__name:"Info",props:{context:String,id:Number,company_id:Number|null,date_start:String,date_finish:String,status:String,production_order_products:Array,production_order_parts:Array,production_order_actions:Array,companies:Array,products:Array},setup(c){var z,E,M,q,A;const u=c,P=u.context==="create",b=u.context==="show",f=u.context==="edit",U=[{id:"draft",name:"Rascunho"},{id:"waiting",name:"Pronto para Produ\xE7\xE3o"},{id:"in_production",name:"Em Produ\xE7\xE3o"},{id:"done",name:"Finalizado"},{id:"canceled",name:"Cancelado"}],m=x({id:(z=u.id)!=null?z:null,company_id:(E=u.company_id)!=null?E:null,date_start:(M=w.YYYYMMDDtoDDMMYYYY(u.date_start))!=null?M:null,date_finish:(q=w.YYYYMMDDtoDDMMYYYY(u.date_finish))!=null?q:null,status:(A=u.status)!=null?A:"draft"}),g=x({production_order_id:u.id,product_id:null,quantity:null}),F=()=>{v.Inertia.post(route("production_order.store"),m)},T=()=>{v.Inertia.put(route("production_order.update",u.id),m)},O=r=>{v.Inertia.put(route("production_order_product.increment",u.id),x({production_order_product:r}))},B=r=>{v.Inertia.put(route("production_order_product.decrement",u.id),x({production_order_product:r}))},j=()=>{v.Inertia.post(route("production_order_product.store"),g),g.reset()},Q=r=>{v.Inertia.delete(route("production_order_product.destroy",r))};return(r,d)=>{const p=L("font-awesome-icon");return e(),R(G,null,{header:C(()=>[P?(e(),o(_,{key:0},[H],64)):i("",!0),b||f?(e(),o(_,{key:1},[J],64)):i("",!0)]),actions:C(()=>[t("a",{href:r.route("production_order.index"),class:"btn btn-outline mr-2 gap-2"},[l(p,{icon:"fa-solid fa-arrow-left",size:"lg"}),W],8,K),P?(e(),o(_,{key:0},[n(k).canView(r.$page.props.user,{permission:"production_order.create"})?(e(),o("a",{key:0,onClick:d[0]||(d[0]=s=>F()),class:"btn btn-success gap-2"},[l(p,{icon:"fa-solid fa-save",size:"lg"}),X])):i("",!0)],64)):i("",!0),f?(e(),o(_,{key:1},[n(k).canView(r.$page.props.user,{permission:"production_order.update"})?(e(),o("a",{key:0,onClick:d[1]||(d[1]=s=>T()),class:"btn btn-success gap-2"},[l(p,{icon:"fa-solid fa-arrows-rotate",size:"lg"}),Z])):i("",!0)],64)):i("",!0),b?(e(),o(_,{key:2},[n(k).canView(r.$page.props.user,{permission:"production_order.read"})?(e(),o("a",{key:0,href:r.route("production_order.print",c.id),target:"_blank",class:"btn btn-accent mr-2 gap-2"},[l(p,{icon:"fa-solid fa-print",size:"lg"}),st],8,tt)):i("",!0),n(k).canView(r.$page.props.user,{permission:"production_order.update"})?(e(),o("a",{key:1,href:r.route("production_order.edit",c.id),class:"btn btn-info mr-2 gap-2"},[l(p,{icon:"fa-solid fa-edit",size:"lg"}),ot],8,et)):i("",!0),n(k).canView(r.$page.props.user,{permission:"production_order.delete"})?(e(),o("a",dt,[l(p,{icon:"fa-solid fa-trash",size:"lg"}),nt])):i("",!0),t("div",at,[t("div",it,[lt,rt,t("div",ct,[t("a",{onClick:d[2]||(d[2]=s=>r.destroyProduct()),class:"btn"},"Sim"),ut])])])],64)):i("",!0)]),default:C(()=>[t("div",mt,[l($,{label:"Empresa",options:c.companies,modelValue:n(m).company_id,"onUpdate:modelValue":d[3]||(d[3]=s=>n(m).company_id=s),disabled:b},null,8,["options","modelValue"]),l(Y,{label:"Data de In\xEDcio",modelValue:n(m).date_start,"onUpdate:modelValue":d[4]||(d[4]=s=>n(m).date_start=s),disabled:b,mask:"##/##/####"},null,8,["modelValue"]),l(Y,{label:"Data de T\xE9rmino",modelValue:n(m).date_finish,"onUpdate:modelValue":d[5]||(d[5]=s=>n(m).date_finish=s),disabled:b,mask:"##/##/####"},null,8,["modelValue"]),l($,{label:"Status",options:U,modelValue:n(m).status,"onUpdate:modelValue":d[6]||(d[6]=s=>n(m).status=s),disabled:b||P},null,8,["modelValue","disabled"])]),pt,t("div",_t,[t("table",ht,[t("thead",null,[t("tr",null,[f?(e(),o("th",bt,"\xA0")):i("",!0),ft,gt])]),t("tbody",null,[f?(e(),o("tr",vt,[t("td",yt,[t("a",kt,[l(p,{icon:"fa-solid fa-add",size:"lg"}),xt]),t("div",Vt,[t("div",wt,[Pt,t("div",null,[l($,{label:"Produto",options:c.products,modelValue:n(g).product_id,"onUpdate:modelValue":d[7]||(d[7]=s=>n(g).product_id=s)},null,8,["options","modelValue"]),l(Y,{label:"Quantidade",modelValue:n(g).quantity,"onUpdate:modelValue":d[8]||(d[8]=s=>n(g).quantity=s),mask:"##"},null,8,["modelValue"])]),t("div",Ct,[Yt,t("a",{class:"btn",onClick:d[9]||(d[9]=s=>j())},"Adicionar")])])])])])):i("",!0),(e(!0),o(_,null,V(c.production_order_products,(s,h)=>(e(),o("tr",{key:h},[f?(e(),o("td",$t,[t("a",{class:"btn btn-sm btn-ghost btn-square",onClick:y=>Q(s.id)},[l(p,{icon:"fa-solid fa-trash",size:"lg"})],8,Dt)])):i("",!0),t("td",null,a(s.product.name),1),t("td",zt,[f?(e(),o("div",Et,[t("label",Mt,[t("button",{onClick:y=>B(s.id),class:"btn btn-sm btn-ghost",disabled:s.quantity<=1},[l(p,{icon:"fa-solid fa-minus"})],8,qt),t("span",null,a(s.quantity),1),t("button",{onClick:y=>O(s.id),class:"btn btn-sm btn-ghost"},[l(p,{icon:"fa-solid fa-plus"})],8,At)])])):(e(),o(_,{key:1},[D(a(s.quantity),1)],64))])]))),128))])])]),c.production_order_parts.length?(e(),o("div",St,"Etapas de Produ\xE7\xE3o")):i("",!0),t("div",Nt,[(e(!0),o(_,null,V(c.production_order_parts,(s,h)=>{var y,S,N,I;return e(),o("div",{key:h,class:"card card-compact bg-base-100 shadow-xl mb-2"},[t("div",It,[t("div",Ut,a((y=s.product_recipe)==null?void 0:y.product.name),1)]),t("div",Ft,[t("div",Tt,a(s.quantity)+"x "+a((S=s.product_recipe)==null?void 0:S.part.name),1)]),t("div",Ot,[t("div",Bt,[t("div",jt,[Qt,t("div",Rt,a((N=s.done)!=null?N:0)+" de "+a(s.quantity),1)]),t("div",Lt,[Gt,t("div",Ht,a((I=s.product_recipe.part.machinery.name)!=null?I:"---"),1)])])])])}),128))]),c.production_order_actions.length?(e(),o("div",Jt,"Registros")):i("",!0),c.production_order_actions.length?(e(),o("div",Kt,[(e(!0),o(_,null,V(c.production_order_actions,(s,h)=>(e(),o("div",{key:h,class:"card card-compact mb-2 w-full bg-base-100 shadow-xl sm:hidden"},[t("div",Wt,[t("div",Xt,a(n(w).toFormatedString(s.created_at))+" - "+a(s.user.name),1),t("div",Zt,a(s.action.description),1),t("div",ts,a(s.description),1)])]))),128)),ss,(e(!0),o(_,null,V(c.production_order_actions,(s,h)=>(e(),o("div",{key:h,class:"grid grid-cols-3 gap-2 bg-base-100 rounded-b-md"},[t("div",es,a(n(w).toFormatedString(s.created_at))+" - "+a(s.user.name),1),t("div",os,a(s.action.description),1),t("div",ds,a(s.description),1)]))),128))])):i("",!0)]),_:1})}}};export{us as default};
